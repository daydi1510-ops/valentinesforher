<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>ğŸ’– Be My Valentine?</title>

  <!-- Pixel font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg1:#0b0f2a;
      --bg2:#2b0b2a;
      --pink:#ff4fd8;
      --hot:#ff2e63;
      --cyan:#18e9ff;
      --lime:#a7ff4f;
      --gold:#ffd36e;
      --ink:#0a0a10;
      --card:rgba(10,10,16,.62);
      --glass:rgba(255,255,255,.08);
      --stroke:rgba(255,255,255,.14);
      --shadow: 0 20px 60px rgba(0,0,0,.45);
      --radius: 18px;
      --px: 2px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Press Start 2P", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:#fff;
      overflow:hidden;
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(255,79,216,.18), transparent 60%),
        radial-gradient(1000px 700px at 90% 20%, rgba(24,233,255,.14), transparent 55%),
        radial-gradient(900px 700px at 50% 100%, rgba(167,255,79,.10), transparent 55%),
        linear-gradient(135deg, var(--bg1), var(--bg2));
    }

    /* Mosaic + pixel grid overlay */
    .mosaic{
      position:fixed; inset:0;
      pointer-events:none;
      background:
        linear-gradient(transparent 31px, rgba(255,255,255,.05) 32px),
        linear-gradient(90deg, transparent 31px, rgba(255,255,255,.05) 32px);
      background-size:32px 32px;
      mix-blend-mode: overlay;
      opacity:.55;
      filter: drop-shadow(0 0 20px rgba(255,79,216,.15));
    }
    .tiles{
      position:fixed; inset:-40px;
      pointer-events:none;
      background:
        conic-gradient(from 180deg at 50% 50%,
          rgba(255,79,216,.10), rgba(24,233,255,.08), rgba(255,211,110,.08), rgba(167,255,79,.08), rgba(255,79,216,.10));
      mask-image: radial-gradient(circle at 50% 40%, black 35%, transparent 70%);
      opacity:.9;
      filter: blur(18px) saturate(1.2);
      animation: floatBg 10s ease-in-out infinite;
    }
    @keyframes floatBg{
      0%,100%{transform:translate3d(0,0,0)}
      50%{transform:translate3d(0,-12px,0)}
    }

    /* Pixel hearts */
    .hearts{
      position:fixed; inset:0;
      pointer-events:none;
      overflow:hidden;
    }
    .heart{
      position:absolute;
      width:18px; height:18px;
      transform: rotate(45deg);
      opacity:.95;
      filter: drop-shadow(0 0 10px rgba(255,79,216,.35));
      animation: rise linear infinite;
    }
    .heart::before,.heart::after{
      content:"";
      position:absolute;
      width:18px; height:18px;
      background: var(--hot);
      border-radius: 3px;
      image-rendering: pixelated;
    }
    .heart::before{ left:-9px; border-radius: 9px 9px 3px 3px;}
    .heart::after{ top:-9px; border-radius: 9px 9px 3px 3px;}
    @keyframes rise{
      from{ transform:translateY(110vh) rotate(45deg); }
      to{ transform:translateY(-30vh) rotate(45deg); }
    }

    /* Center layout */
    .wrap{
      position:relative;
      height:100%;
      display:grid;
      place-items:center;
      padding:24px;
    }

    .card{
      width:min(820px, 92vw);
      background: var(--card);
      border: 1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      padding: 22px 22px 18px;
      backdrop-filter: blur(10px);
      position:relative;
      overflow:hidden;
    }

    .hud{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:14px;
      font-size:10px;
      opacity:.95;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:10px 12px;
      border:1px solid rgba(255,255,255,.14);
      border-radius:999px;
      background: rgba(255,255,255,.06);
      box-shadow: 0 12px 30px rgba(0,0,0,.25);
      white-space:nowrap;
    }
    .dot{
      width:10px;height:10px;border-radius:2px;
      background: var(--lime);
      box-shadow:0 0 0 2px rgba(0,0,0,.35), 0 0 12px rgba(167,255,79,.65);
    }
    .dot.pink{ background: var(--pink); box-shadow:0 0 0 2px rgba(0,0,0,.35), 0 0 12px rgba(255,79,216,.55); }

    .title{
      font-size: clamp(16px, 2.6vw, 28px);
      line-height:1.5;
      margin: 6px 0 10px;
      text-shadow: 0 3px 0 rgba(0,0,0,.35);
    }
    .subtitle{
      font-size: clamp(10px, 1.7vw, 14px);
      line-height: 1.8;
      opacity:.9;
      margin:0 0 18px;
    }

    .screen{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:16px;
      align-items:stretch;
    }
    @media (max-width: 760px){
      .screen{ grid-template-columns:1fr; }
    }

    .panel{
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.05);
      border-radius: 14px;
      padding: 14px;
      position:relative;
      overflow:hidden;
    }
    .panel:before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(600px 200px at 30% 0%, rgba(255,79,216,.18), transparent 60%),
                  radial-gradient(500px 200px at 70% 100%, rgba(24,233,255,.12), transparent 60%);
      opacity:.9;
      pointer-events:none;
    }
    .panel > *{ position:relative; z-index:1; }

    .question{
      font-size: clamp(12px, 2.0vw, 16px);
      line-height: 1.8;
      margin: 0 0 14px;
    }

    .btnRow{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
      margin-top: 12px;
    }

    .btn{
      cursor:pointer;
      user-select:none;
      border:none;
      font-family:inherit;
      font-size: 12px;
      padding: 14px 16px;
      border-radius: 12px;
      transition: transform .12s ease, filter .12s ease;
      box-shadow: 0 12px 0 rgba(0,0,0,.35);
      transform: translateY(0);
      display:inline-flex;
      align-items:center;
      gap:10px;
      letter-spacing: .5px;
      text-transform: uppercase;
    }
    .btn:active{ transform: translateY(6px); box-shadow:0 6px 0 rgba(0,0,0,.35); }
    .btn:hover{ filter: brightness(1.05) saturate(1.05); }

    .btnYes{
      background: linear-gradient(135deg, var(--lime), var(--cyan));
      color: #061018;
    }
    .btnNo{
      background: linear-gradient(135deg, var(--hot), var(--pink));
      color: #1b0612;
      position:relative;
    }

    .mini{
      font-size:10px;
      opacity:.92;
      line-height:1.8;
      margin:0;
    }

    .dialog{
      margin-top:12px;
      font-size:10px;
      line-height:1.9;
      background: rgba(0,0,0,.25);
      border:1px dashed rgba(255,255,255,.20);
      border-radius:12px;
      padding: 10px 12px;
      min-height: 78px;
    }

    /* Right side: â€œretro consoleâ€ */
    .consoleTop{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:10px;
    }
    .meter{
      height:12px;
      border-radius: 10px;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.14);
      overflow:hidden;
      flex:1;
    }
    .meter > i{
      display:block;
      height:100%;
      width: 18%;
      background: linear-gradient(90deg, var(--pink), var(--gold));
      box-shadow: 0 0 20px rgba(255,79,216,.35);
      transition: width .25s ease;
    }
    .stat{
      font-size:10px;
      opacity:.9;
      white-space:nowrap;
    }
    .pixelArt{
      margin-top:10px;
      display:grid;
      grid-template-columns: repeat(10, 1fr);
      gap: 3px;
      padding: 8px;
      border-radius: 12px;
      background: rgba(0,0,0,.20);
      border:1px solid rgba(255,255,255,.12);
    }
    .px{
      width:100%;
      aspect-ratio: 1;
      border-radius: 3px;
      background: rgba(255,255,255,.08);
      box-shadow: inset 0 0 0 1px rgba(0,0,0,.25);
    }

    /* Intro overlay */
    .intro{
      position:fixed; inset:0;
      display:grid;
      place-items:center;
      background: rgba(0,0,0,.55);
      backdrop-filter: blur(10px);
      z-index: 50;
      padding:24px;
    }
    .introBox{
      width:min(760px, 92vw);
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(10,10,16,.72);
      box-shadow: var(--shadow);
      padding: 20px;
      position:relative;
      overflow:hidden;
    }
    .introBox:before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(800px 300px at 20% 0%, rgba(255,79,216,.18), transparent 65%),
                  radial-gradient(800px 300px at 90% 100%, rgba(24,233,255,.14), transparent 65%);
      opacity:.9;
      pointer-events:none;
    }
    .introBox > *{ position:relative; z-index:1; }

    .introTitle{
      margin:0 0 8px;
      font-size: clamp(14px, 2.4vw, 22px);
      line-height:1.6;
    }
    .introText{
      margin:0 0 14px;
      font-size: 10px;
      line-height: 2.0;
      opacity:.92;
    }
    .pressStart{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 12px 14px;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      cursor:pointer;
      box-shadow: 0 10px 0 rgba(0,0,0,.35);
      user-select:none;
      animation: blink 1.1s steps(2,end) infinite;
      width: fit-content;
    }
    @keyframes blink{
      50%{ filter: brightness(1.2); transform: translateY(-1px); }
    }

    /* Celebration */
    canvas#confetti{
      position:fixed; inset:0;
      pointer-events:none;
      z-index: 60;
      display:none;
    }
    .win{
      position:fixed; inset:0;
      display:none;
      place-items:center;
      background: rgba(0,0,0,.45);
      backdrop-filter: blur(8px);
      z-index: 70;
      padding:24px;
    }
    .winBox{
      width:min(760px, 92vw);
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(10,10,16,.74);
      box-shadow: var(--shadow);
      padding: 18px;
      position:relative;
      overflow:hidden;
    }
    .winBox:before{
      content:"";
      position:absolute; inset:-2px;
      background:
        radial-gradient(700px 300px at 20% 0%, rgba(167,255,79,.20), transparent 60%),
        radial-gradient(700px 300px at 90% 100%, rgba(255,79,216,.18), transparent 60%),
        radial-gradient(700px 300px at 50% 50%, rgba(24,233,255,.12), transparent 65%);
      opacity:.95;
      pointer-events:none;
    }
    .winBox > *{ position:relative; z-index:1; }
    .winTitle{
      margin:0 0 10px;
      font-size: clamp(14px, 2.4vw, 22px);
      line-height:1.6;
    }
    .winText{
      margin:0 0 14px;
      font-size: 10px;
      line-height: 2.0;
      opacity:.95;
    }
    .tinyRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:center;
      margin-top:10px;
    }
    .chip{
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.08);
      font-size:10px;
      display:inline-flex;
      align-items:center;
      gap:8px;
    }
    .star{
      width:10px;height:10px;border-radius:2px;
      background: var(--gold);
      box-shadow:0 0 0 2px rgba(0,0,0,.35), 0 0 12px rgba(255,211,110,.55);
    }

    .footerTip{
      margin-top:14px;
      font-size:10px;
      opacity:.75;
      line-height:1.9;
    }
    a{ color: var(--cyan); text-decoration:none; }
    a:hover{ text-decoration:underline; }
  </style>
</head>
<body>
  <div class="tiles"></div>
  <div class="mosaic"></div>
  <div class="hearts" id="hearts"></div>

  <!-- Intro -->
  <div class="intro" id="intro">
    <div class="introBox">
      <div class="hud">
        <div class="badge"><span class="dot pink"></span> ROMANCE QUEST</div>
        <div class="badge"><span class="dot"></span> MODE: PIXEL LOVE</div>
      </div>
      <h1 class="introTitle">ğŸ® Press Start to Begin</h1>
      <p class="introText">
        Welcome to a tiny retro universe where one answer unlocks a very cute date.<br/>
        Tip: If you see a â€œNoâ€ buttonâ€¦ it might be a littleâ€¦ shy ğŸ˜ˆ
      </p>
      <div class="pressStart" id="startBtn">â–¶ PRESS START</div>
      <p class="footerTip">Optional: add a name by using <span style="opacity:.95">?to=Name</span> in the URL.</p>
    </div>
  </div>

  <canvas id="confetti"></canvas>

  <!-- Win -->
  <div class="win" id="win">
    <div class="winBox">
      <div class="hud">
        <div class="badge"><span class="dot"></span> ACHIEVEMENT UNLOCKED</div>
        <div class="badge"><span class="dot pink"></span> TRUE LOVE ENDING</div>
      </div>
      <h2 class="winTitle" id="winTitle">ğŸ’– Yay!!</h2>
      <p class="winText" id="winText">
        You just made my heart do the Mario jump ğŸ•¹ï¸âœ¨<br/>
        Valentine status: <span style="color:var(--lime)">CONFIRMED</span>.
      </p>
      <div class="tinyRow">
        <div class="chip"><span class="star"></span> Date unlocked</div>
        <div class="chip">ğŸ“ Dessert bonus</div>
        <div class="chip">ğŸŒ¸ Cute photos</div>
        <div class="chip">ğŸ¶ Good vibes</div>
      </div>
      <div class="btnRow" style="margin-top:14px">
        <button class="btn btnYes" id="againBtn">PLAY AGAIN</button>
        <button class="btn btnNo" id="closeBtn">CLOSE</button>
      </div>
      <p class="footerTip">Want it extra personal? Change the message in the HTML (search for â€œwinTextâ€).</p>
    </div>
  </div>

  <div class="wrap">
    <div class="card" id="card">
      <div class="hud">
        <div class="badge"><span class="dot"></span> HP: <span id="hp">100</span></div>
        <div class="badge"><span class="dot pink"></span> LOVE: <span id="love">0</span></div>
      </div>

      <h1 class="title" id="title">Will you be my Valentine? ğŸ’˜</h1>
      <p class="subtitle" id="subtitle">
        Choose wiselyâ€¦ this game has only one correct ending ğŸ˜Œ
      </p>

      <div class="screen">
        <div class="panel" id="leftPanel">
          <div class="question" id="question">
            Press <span style="color:var(--cyan)">YES</span> to unlock the cutest date ever.<br/>
            Press <span style="color:var(--pink)">NO</span> if you dareâ€¦ ğŸ‘€
          </div>

          <div class="btnRow">
            <button class="btn btnYes" id="yesBtn">YES âœ…</button>
            <button class="btn btnNo" id="noBtn">NO âŒ</button>
          </div>

          <div class="dialog" id="dialog">
            <p class="mini" id="dialogText">
              System: Awaiting player choiceâ€¦
            </p>
          </div>

          <p class="footerTip">
            Tip: share your GitHub Pages link. If updates donâ€™t show, hard refresh or add <span style="opacity:.95">?v=2</span>.
          </p>
        </div>

        <div class="panel">
          <div class="consoleTop">
            <div class="stat">ROMANCE METER</div>
            <div class="meter"><i id="meterFill"></i></div>
            <div class="stat"><span id="meterPct">18%</span></div>
          </div>
          <p class="mini" style="margin:0">
            Mission: get the â€œYESâ€ ending âœ¨<br/>
            Bonus: the â€œNOâ€ button might try to escape.
          </p>
          <div class="pixelArt" id="pixelArt" aria-hidden="true"></div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ===== Helpers
    const $ = (id) => document.getElementById(id);
    const rand = (a,b)=> Math.random()*(b-a)+a;
    const clamp = (v,min,max)=> Math.max(min, Math.min(max,v));

    // ===== Optional personalization (?to=Name)
    const params = new URLSearchParams(location.search);
    const toName = params.get("to")?.trim();
    if (toName){
      $("subtitle").innerText = `Hey ${toName}â€¦ I have a tiny question for you ğŸ«¶`;
      $("winTitle").innerText = `ğŸ’– Yay, ${toName}!!`;
    }

    // ===== Pixel hearts background
    const hearts = $("hearts");
    const HEARTS = 22;
    for (let i=0;i<HEARTS;i++){
      const h = document.createElement("div");
      h.className = "heart";
      h.style.left = rand(0,100) + "vw";
      h.style.animationDuration = rand(6,12) + "s";
      h.style.animationDelay = rand(-12,0) + "s";
      h.style.opacity = rand(.35,.95);
      const size = rand(12,26);
      h.style.width = size+"px";
      h.style.height = size+"px";
      hearts.appendChild(h);
    }

    // ===== Pixel art block (random mosaic)
    const art = $("pixelArt");
    for (let i=0;i<100;i++){
      const p = document.createElement("div");
      p.className = "px";
      const r = Math.random();
      const c =
        r < 0.18 ? "rgba(255,79,216,.65)" :
        r < 0.30 ? "rgba(24,233,255,.55)" :
        r < 0.40 ? "rgba(167,255,79,.45)" :
        r < 0.48 ? "rgba(255,211,110,.55)" :
        "rgba(255,255,255,.10)";
      p.style.background = c;
      art.appendChild(p);
    }

    // ===== Intro
    $("startBtn").addEventListener("click", ()=>{
      $("intro").style.display = "none";
    });

    // ===== Game state
    let noCount = 0;
    let hp = 100;
    let love = 0;

    function setStats(){
      $("hp").innerText = hp;
      $("love").innerText = love;
      const pct = clamp(18 + love, 18, 100);
      $("meterFill").style.width = pct + "%";
      $("meterPct").innerText = pct + "%";
    }
    setStats();

    const lines = [
      "No? ğŸ˜³ System detected a lie.",
      "Are you sure? My heart is bufferingâ€¦",
      "That button looks suspiciously confident.",
      "Plot twist: â€œNoâ€ is disabled in this universe.",
      "I will simplyâ€¦ ask again, but cuter.",
      "Your finger slipped. Try YES ğŸ˜Œ",
      "Okay now you're just farming dialogue ğŸ˜‚",
      "Final warning: the NO button may run away."
    ];

    function speak(text){
      $("dialogText").innerText = text;
    }

    // ===== No button dodge
    const noBtn = $("noBtn");
    const leftPanel = $("leftPanel");

    function moveNoButton(){
      const panelRect = leftPanel.getBoundingClientRect();
      const btnRect = noBtn.getBoundingClientRect();

      // Keep within panel
      const padding = 12;
      const maxX = panelRect.width - btnRect.width - padding;
      const maxY = panelRect.height - btnRect.height - padding;

      const x = rand(padding, maxX);
      const y = rand(padding + 60, maxY); // avoid top area
      noBtn.style.position = "absolute";
      noBtn.style.left = x + "px";
      noBtn.style.top = y + "px";
    }

    function noClicked(){
      noCount++;
      hp = clamp(hp - 7, 0, 100);
      love = clamp(love + 3, 0, 100);
      setStats();

      speak(lines[Math.min(noCount-1, lines.length-1)]);

      // Make it harder over time
      if (noCount >= 2){
        moveNoButton();
      }
      if (noCount >= 4){
        // extra dodge on hover
        noBtn.onmouseenter = moveNoButton;
      }
      if (noCount >= 7){
        // super dodge mode
        noBtn.onmousemove = moveNoButton;
      }
    }

    noBtn.addEventListener("click", (e)=>{
      e.preventDefault();
      noClicked();
    });

    // ===== Yes = Win
    $("yesBtn").addEventListener("click", ()=>{
      love = 100;
      hp = 100;
      setStats();
      speak("YES selected âœ… Loading cutest date everâ€¦");
      triggerWin();
    });

    // ===== Win overlay + confetti
    const canvas = $("confetti");
    const ctx = canvas.getContext("2d");
    let confettiOn = false;
    let pieces = [];

    function resize(){
      canvas.width = window.innerWidth;
      canvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resize);
    resize();

    function makeConfetti(){
      const N = 220;
      pieces = Array.from({length:N}, ()=>({
        x: rand(0, canvas.width),
        y: rand(-canvas.height, 0),
        r: rand(2,6),
        vx: rand(-2,2),
        vy: rand(2,7),
        a: rand(0, Math.PI*2),
        va: rand(-.12,.12),
        // avoid setting specific palette names in code? (we're allowed; it's not a chart)
        c: [ "rgba(255,79,216,.95)", "rgba(24,233,255,.95)", "rgba(167,255,79,.95)", "rgba(255,211,110,.95)", "rgba(255,46,99,.95)" ][Math.floor(rand(0,5))]
      }));
    }

    function draw(){
      if (!confettiOn) return;
      ctx.clearRect(0,0,canvas.width,canvas.height);
      for (const p of pieces){
        p.x += p.vx;
        p.y += p.vy;
        p.a += p.va;
        if (p.y > canvas.height + 20){
          p.y = rand(-80, -20);
          p.x = rand(0, canvas.width);
        }
        ctx.save();
        ctx.translate(p.x, p.y);
        ctx.rotate(p.a);
        ctx.fillStyle = p.c;
        ctx.fillRect(-p.r, -p.r, p.r*2.2, p.r*1.2);
        ctx.restore();
      }
      requestAnimationFrame(draw);
    }

    function triggerWin(){
      makeConfetti();
      confettiOn = true;
      canvas.style.display = "block";
      $("win").style.display = "grid";
      draw();
    }

    function resetGame(){
      confettiOn = false;
      canvas.style.display = "none";
      $("win").style.display = "none";

      noCount = 0;
      hp = 100;
      love = 0;
      setStats();

      // reset NO button position & behavior
      noBtn.style.position = "relative";
      noBtn.style.left = "";
      noBtn.style.top = "";
      noBtn.onmouseenter = null;
      noBtn.onmousemove = null;

      speak("System: Awaiting player choiceâ€¦");
    }

    $("againBtn").addEventListener("click", resetGame);
    $("closeBtn").addEventListener("click", ()=>{
      $("win").style.display = "none";
      confettiOn = false;
      canvas.style.display = "none";
      speak("Okay okayâ€¦ but you still said YES ğŸ˜ŒğŸ’–");
    });

    // Small quality: tap â€œNoâ€ on mobile sometimes wonâ€™t hover-dodge. Add touchstart dodge after a few tries.
    noBtn.addEventListener("touchstart", ()=>{
      if (noCount >= 2) moveNoButton();
    }, {passive:true});
  </script>
</body>
</html>
